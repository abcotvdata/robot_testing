name: Download all nypd precinct files in array

# Controls when the workflow will run
on:
  schedule:
    - cron: '45 17 * * *'
      # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  download-and-commit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Download file
        run: |
          urls=("https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbbx.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-040pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-041pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-042pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-043pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-044pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-045pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-046pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-047pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-048pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-049pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-050pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-052pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbbs.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-060pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-061pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-062pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-063pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-066pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-067pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-068pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-069pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-070pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-071pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-072pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-076pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-078pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbbn.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-073pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-075pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-077pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-079pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-081pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-083pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-084pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-088pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-090pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-094pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbms.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-001pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-005pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-006pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-007pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-009pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-010pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-013pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-014pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-017pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-018pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbmn.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-019pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-020pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-022pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-023pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-024pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-025pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-026pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-028pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-030pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-032pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-033pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-034pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbqs.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-100pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-101pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-102pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-103pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-105pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-106pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-107pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-113pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbqn.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-104pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-108pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-109pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-110pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-111pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-112pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-114pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-115pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-pbsi.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-120pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-121pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-122pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-123pct.xlsx" "https://www1.nyc.gov/assets/nypd/downloads/excel/crime_statistics/cs-en-us-city.xlsx")
          for url in "${urls[@]}"
          do
            filename=$(basename "$url")
            curl -o "data/$filename" "$url"
          done
      - name: Commit file
        uses: EndBug/add-and-commit@v7
        with:
          message: 'Add downloaded files'
          add: 'data/source/weekly/*'
